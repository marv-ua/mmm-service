//******************************************************************************
//	Предопределенная процедура
//           
//
Процедура ПриВводеСтроки()
	СтатусВозврата(0); Возврат
КонецПроцедуры

//******************************************************************************
//	Предопределенная процедура
//           
//
Процедура ПриОткрытии()
	Параметры = Форма.Параметр;
	Если ТипЗначенияСтр(Параметры)="СписокЗначений" Тогда // для выбора типа вычета по авторским в документах
		ТекЗнач = Параметры.ПолучитьЗначение(2);
		Спр = СоздатьОбъект("Справочник.ВидыВычетов");
		Спр.НайтиПоКоду(ТекЗнач);
		ТекЗнач = Спр.ТекущийЭлемент();
		СписокКПоказу=СоздатьОбъект("СписокЗначений");
		
		Спр.НайтиПоКоду("404");
		СписокКПоказу.ДобавитьЗначение(Спр.ТекущийЭлемент());
		Спр.НайтиПоКоду("405");
		СписокКПоказу.ДобавитьЗначение(Спр.ТекущийЭлемент());
		
		СписокКПоказу.Сортировать();
		Если СписокКПоказу.РазмерСписка()>0  Тогда
			ИспользоватьСписокЭлементов(СписокКПоказу);
			Если (ТекЗнач.Выбран()=1) и (СписокКПоказу.НайтиЗначение(ТекЗнач)>0) Тогда
				АктивизироватьОбъект(ТекЗнач);
			КонецЕсли;
		КонецЕсли;
		Форма.ОбработкаВыбораСтроки(1)
		
	КонецЕсли;
	СохранениеПериодическихРеквизитов(2,"*");
КонецПроцедуры	// ПриОткрытии

//******************************************************************************
//	Предопределенная процедура
//
Процедура ПриВыбореСтроки()
	Форма.Параметр = ТекущийЭлемент();
	Форма.Закрыть();
КонецПроцедуры	// ПриВыбореСтроки

//******************************************************************************
//	Предопределенная процедура
//
Процедура ПриЗаписи()
	
	СохранениеПериодическихРеквизитов(4,"*"); 
	СписокПР = СохранениеПериодическихРеквизитов(5);
	
	// Список значений содержащий в себе тип,вид и длину,точность для неопредленного реквизита
	// строковое представление - "Имя реквизита", а значение - строка соджержащая тип длину и точность, разделенные запятыми
	СписокТипВидРеквизитов = СоздатьОбъект("СписокЗначений");
	СписокТипВидРеквизитов.ДобавитьЗначение("Число,15,0", "Сумма");
	СписокТипВидРеквизитов.ДобавитьЗначение("Число,15,0", "ПределДоходов");   
	
	Если ПустоеЗначение(СтрЗаменить(СписокПР,",",""))=0 Тогда
		Если глЗаписьПериодическихРеквизитов(Контекст, СписокПР, , , , СписокТипВидРеквизитов)=0 Тогда
			СтатусВозврата(0);
			Возврат;
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры	// ПриВыбореСтроки
